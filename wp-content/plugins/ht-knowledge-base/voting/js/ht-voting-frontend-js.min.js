jQuery(document).ready((function(t){"use strict";function n(){t(".ht-voting-links a").each((function(a){var i=t(this),e=i.hasClass("enabled"),o=i.attr("data-direction"),r=i.attr("data-type"),c=i.attr("data-nonce"),l=i.attr("data-id"),d=i.attr("data-allow"),s=i.attr("data-display");i.click((function(a){if(a.preventDefault(),e){var i={action:"ht_voting",direction:o,type:r,nonce:c,id:l,allow:d,display:s};t.post(voting.ajaxurl,i,(function(a){var i;""!==a&&("post"==r?(t("#ht-voting-post-"+l).replaceWith(a),(i=t("#ht-voting-post-"+l).find(".ht-voting-comment").first()).hide(),i.slideDown(500,(function(){i.find("textarea").focus()}))):"comment"==r&&(t("#ht-voting-comment-"+l).slideUp(500),t("#ht-voting-comment-"+l).replaceWith(a),t("#ht-voting-comment-"+l).slideDown(500)),n(),t(".ht-voting-comment").each((function(n){var a=t(this),i=a.attr("data-vote-key"),e=a.hasClass("enabled"),o=a.attr("data-nonce"),r=a.attr("data-id");a.children("button").click((function(n){var c=a.children("textarea").val();if(n.preventDefault(),e){var l={action:"ht_voting_update_feedback",key:i,nonce:o,comment:c,id:r};t.post(voting.ajaxurl,l,(function(t){a.slideUp(500,(function(){""!==t&&a.html(t),a.slideDown(500)}))}))}else{var d=t(".voting-login-required").attr("data-ht-voting-must-log-in-msg");alert(d)}}))})))}))}else{var v=t(".voting-login-required").attr("data-ht-voting-must-log-in-msg");alert(v)}}))}))}n(),window.globalEnablePostVoting=function(){n()}}));